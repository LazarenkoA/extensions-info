{"ast":null,"code":"import React,{useState}from'react';import{useQuery}from'@tanstack/react-query';import{getUsers}from'../services/userService';import UserCard from'../components/UserCard';import UserModal from'../components/UserModal';import'./Users.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Users=()=>{const[selectedUser,setSelectedUser]=useState(null);const[isModalOpen,setIsModalOpen]=useState(false);const{data:users,isLoading,error}=useQuery({queryKey:['users'],queryFn:getUsers,select:data=>data.data});const handleEditUser=user=>{setSelectedUser(user);setIsModalOpen(true);};const handleCreateUser=()=>{setSelectedUser(null);setIsModalOpen(true);};const handleCloseModal=()=>{setIsModalOpen(false);setSelectedUser(null);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \",error.message]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"users-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"users-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateUser,className:\"btn btn-primary\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"users-list\",children:users&&users.length>0?users.map(user=>/*#__PURE__*/_jsx(UserCard,{user:user,onEdit:handleEditUser},user.id)):/*#__PURE__*/_jsx(\"div\",{className:\"no-users\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"})})}),isModalOpen&&/*#__PURE__*/_jsx(UserModal,{user:selectedUser,onClose:handleCloseModal})]});};export default Users;","map":{"version":3,"names":["React","useState","useQuery","getUsers","UserCard","UserModal","jsx","_jsx","jsxs","_jsxs","Users","selectedUser","setSelectedUser","isModalOpen","setIsModalOpen","data","users","isLoading","error","queryKey","queryFn","select","handleEditUser","user","handleCreateUser","handleCloseModal","className","children","message","onClick","length","map","onEdit","id","onClose"],"sources":["D:/GIT/go-react-fullstack/frontend/src/pages/Users.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { getUsers } from '../services/userService';\nimport UserCard from '../components/UserCard';\nimport UserModal from '../components/UserModal';\nimport './Users.css';\n\nconst Users = () => {\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const { data: users, isLoading, error } = useQuery({\n    queryKey: ['users'],\n    queryFn: getUsers,\n    select: (data) => data.data,\n  });\n\n  const handleEditUser = (user) => {\n    setSelectedUser(user);\n    setIsModalOpen(true);\n  };\n\n  const handleCreateUser = () => {\n    setSelectedUser(null);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedUser(null);\n  };\n\n  if (isLoading) {\n    return <div className=\"loading\">Загрузка пользователей...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">Ошибка: {error.message}</div>;\n  }\n\n  return (\n    <div className=\"users-page\">\n      <div className=\"users-header\">\n        <h1>Пользователи</h1>\n        <button onClick={handleCreateUser} className=\"btn btn-primary\">\n          Добавить пользователя\n        </button>\n      </div>\n\n      <div className=\"users-list\">\n        {users && users.length > 0 ? (\n          users.map((user) => (\n            <UserCard \n              key={user.id} \n              user={user} \n              onEdit={handleEditUser}\n            />\n          ))\n        ) : (\n          <div className=\"no-users\">\n            <p>Пользователи не найдены</p>\n          </div>\n        )}\n      </div>\n\n      {isModalOpen && (\n        <UserModal \n          user={selectedUser}\n          onClose={handleCloseModal}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Users;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAErD,KAAM,CAAEc,IAAI,CAAEC,KAAK,CAAEC,SAAS,CAAEC,KAAM,CAAC,CAAGhB,QAAQ,CAAC,CACjDiB,QAAQ,CAAE,CAAC,OAAO,CAAC,CACnBC,OAAO,CAAEjB,QAAQ,CACjBkB,MAAM,CAAGN,IAAI,EAAKA,IAAI,CAACA,IACzB,CAAC,CAAC,CAEF,KAAM,CAAAO,cAAc,CAAIC,IAAI,EAAK,CAC/BX,eAAe,CAACW,IAAI,CAAC,CACrBT,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAU,gBAAgB,CAAGA,CAAA,GAAM,CAC7BZ,eAAe,CAAC,IAAI,CAAC,CACrBE,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAW,gBAAgB,CAAGA,CAAA,GAAM,CAC7BX,cAAc,CAAC,KAAK,CAAC,CACrBF,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,GAAIK,SAAS,CAAE,CACb,mBAAOV,IAAA,QAAKmB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,oIAAyB,CAAK,CAAC,CACjE,CAEA,GAAIT,KAAK,CAAE,CACT,mBAAOT,KAAA,QAAKiB,SAAS,CAAC,OAAO,CAAAC,QAAA,EAAC,wCAAQ,CAACT,KAAK,CAACU,OAAO,EAAM,CAAC,CAC7D,CAEA,mBACEnB,KAAA,QAAKiB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBlB,KAAA,QAAKiB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BpB,IAAA,OAAAoB,QAAA,CAAI,0EAAY,CAAI,CAAC,cACrBpB,IAAA,WAAQsB,OAAO,CAAEL,gBAAiB,CAACE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,2HAE/D,CAAQ,CAAC,EACN,CAAC,cAENpB,IAAA,QAAKmB,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBX,KAAK,EAAIA,KAAK,CAACc,MAAM,CAAG,CAAC,CACxBd,KAAK,CAACe,GAAG,CAAER,IAAI,eACbhB,IAAA,CAACH,QAAQ,EAEPmB,IAAI,CAAEA,IAAK,CACXS,MAAM,CAAEV,cAAe,EAFlBC,IAAI,CAACU,EAGX,CACF,CAAC,cAEF1B,IAAA,QAAKmB,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvBpB,IAAA,MAAAoB,QAAA,CAAG,kIAAuB,CAAG,CAAC,CAC3B,CACN,CACE,CAAC,CAELd,WAAW,eACVN,IAAA,CAACF,SAAS,EACRkB,IAAI,CAAEZ,YAAa,CACnBuB,OAAO,CAAET,gBAAiB,CAC3B,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAf,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}